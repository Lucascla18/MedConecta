import{a as Z,d as k,f as G,g as J,h as Q,j as W,k as X,m as Y}from"./chunk-BI3SNNQC.js";import{D as K}from"./chunk-RMY4OVEQ.js";import{A as u,B as e,C as n,D as d,E as M,F as p,Fa as q,G as _,I as w,Ia as U,K as i,L as h,M as y,Ma as $,N as D,Oa as B,U as T,V as z,W as H,la as N,m as x,ma as F,q as C,r as P,ta as L,va as j,w as c,wa as V,x as I,xa as R,y as A,z as v}from"./chunk-HUONWBXV.js";import"./chunk-WFQEB5QE.js";import"./chunk-7KGURMOZ.js";import"./chunk-KMRFCD75.js";import"./chunk-62GOUXOV.js";import"./chunk-QQOM2FGK.js";import"./chunk-KMHLOZFG.js";import"./chunk-NFKFN677.js";import"./chunk-4WFVMWDK.js";import"./chunk-MDMZPGPE.js";import"./chunk-L533IC4V.js";import"./chunk-NY44LQGJ.js";import"./chunk-IFR4H3YE.js";import"./chunk-LF5XB4YN.js";import{a as E,e as f}from"./chunk-BDMMXEV4.js";function ne(l,s){if(l&1){let r=M();e(0,"ion-card",24)(1,"div",25)(2,"div",26)(3,"div",27),i(4),n(),e(5,"div",28)(6,"span",29),i(7),n(),e(8,"span",30),i(9),n()()(),e(10,"div",31),d(11,"ion-icon",11),e(12,"span"),i(13),n()(),e(14,"ion-button",32),p("click",function(){C(r);let t=_();return P(t.joinMeet())}),i(15," Entrar na Chamada "),d(16,"ion-icon",33),n()()()}if(l&2){let r=_();c(3),w("background-color",r.nextAppointment.doctorColor),c(),y(" ",r.nextAppointment.doctorInitials," "),c(3),h(r.nextAppointment.doctorName),c(2),h(r.nextAppointment.specialty),c(4),D("",r.nextAppointment.dateLabel," \xE0s ",r.nextAppointment.timeLabel)}}function oe(l,s){if(l&1){let r=M();e(0,"ion-card",34)(1,"div",35),d(2,"ion-icon",36),e(3,"p"),i(4,"Nenhuma consulta agendada."),n(),e(5,"ion-button",37),p("click",function(){C(r);let t=_();return P(t.goToAppointments("schedule"))}),i(6," Agendar Agora "),n()()()}}function ie(l,s){if(l&1){let r=M();e(0,"div",38),p("click",function(){let t=C(r).$implicit,a=_();return P(a.bookDoctor(t))}),e(1,"div",39),i(2),n(),e(3,"span",40),i(4),n(),e(5,"span",41),i(6),n()()}if(l&2){let r=s.$implicit;c(),w("background-color",r.color),c(),y(" ",r.initials," "),c(2),h(r.name),c(2),h(r.specialty)}}function re(l,s){l&1&&(e(0,"div",42)(1,"p"),i(2,"Nenhum m\xE9dico encontrado."),n()())}var xe=(()=>{let s=class s{constructor(){this.userName="...",this.nextAppointment=null,this.allDoctors=[],this.filteredDoctors=[],this.navCtrl=x(F),this.alertCtrl=x(U),this.auth=x(K),this.firestore=x(Z),this.zone=x(I)}ngOnInit(){this.loadData(),this.loadDoctors()}loadDoctors(){return f(this,null,function*(){try{let o=yield Q(k(this.firestore,"doctors"));this.allDoctors=o.docs.map(t=>E({id:t.id},t.data())),this.filteredDoctors=[...this.allDoctors]}catch(o){console.error("Erro ao carregar m\xE9dicos",o)}})}handleSearch(o){let t=o.target.value?o.target.value.toLowerCase():"";t.trim()===""?this.filteredDoctors=[...this.allDoctors]:this.filteredDoctors=this.allDoctors.filter(a=>a.name.toLowerCase().includes(t)||a.specialty.toLowerCase().includes(t))}joinMeet(){this.nextAppointment&&this.nextAppointment.meetLink?window.open(this.nextAppointment.meetLink,"_system"):this.presentAlert("Link Indispon\xEDvel","Esta consulta n\xE3o possui link.")}bookDoctor(o){let t={queryParams:{doctorName:o.name}};this.navCtrl.navigateForward(["/agendamento"],t)}loadData(){let o=this.auth.currentUser;o?(this.loadUserName(o),this.loadNextAppointment(o)):this.navCtrl.navigateRoot("/login")}loadUserName(o){return f(this,null,function*(){try{let t=yield J(G(this.firestore,`users/${o.uid}`));this.userName=t.exists()?t.data().nome.split(" ")[0]:"Usu\xE1rio"}catch(t){console.error(t)}})}loadNextAppointment(o){let t=X(k(this.firestore,"appointments"),Y("userId","==",o.uid));W(t,a=>{this.zone.run(()=>{let g=new Date,O=a.docs.map(m=>m.data()).filter(m=>{if(!m.dateIso||!m.timeLabel)return!1;let b=new Date(m.dateIso),[ee,te]=m.timeLabel.split(":");return b.setHours(parseInt(ee),parseInt(te),0,0),b>=g});O.sort((m,b)=>new Date(m.dateIso).getTime()-new Date(b.dateIso).getTime()),O.length>0?this.nextAppointment=O[0]:this.nextAppointment=null})})}goToAppointments(o){this.navCtrl.navigateForward(o==="schedule"?"/agendamento":"/tabs/consultas")}viewResults(){return f(this,null,function*(){this.presentAlert("Em breve","Funcionalidade em desenvolvimento.")})}contactSupport(){return f(this,null,function*(){this.presentAlert("Suporte","Voc\xEA ser\xE1 redirecionado.")})}presentAlert(o,t){return f(this,null,function*(){yield(yield this.alertCtrl.create({header:o,message:t,buttons:["OK"]})).present()})}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=A({type:s,selectors:[["app-home"]],decls:42,vars:4,consts:[[1,"ion-no-border"],[1,"home-header-toolbar"],[1,"header-row"],[1,"app-name"],["src","assets/logo.jpg","alt","Logo",1,"app-icon"],[1,"section-title"],["class","appointment-card",4,"ngIf"],["class","empty-card",4,"ngIf"],[1,"actions-container"],[1,"action-item",3,"click"],[1,"circle-icon","color-blue"],["name","calendar-outline"],[1,"circle-icon","color-purple"],["name","time-outline"],[1,"circle-icon","color-green"],["name","document-text-outline"],[1,"circle-icon","color-orange"],["name","chatbubbles-outline"],[1,"search-wrapper"],["placeholder","Buscar m\xE9dico ou especialidade","mode","ios",3,"ionInput"],[1,"doctors-carousel"],[1,"carousel-track"],["class","doctor-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"appointment-card"],[1,"card-content"],[1,"doctor-row"],[1,"avatar"],[1,"info"],[1,"name"],[1,"spec"],[1,"time-badge"],["expand","block","shape","round","color","light",1,"action-btn",3,"click"],["slot","end","name","videocam-outline"],[1,"empty-card"],[1,"empty-state"],["name","calendar-number-outline"],["fill","outline","size","small","shape","round",3,"click"],[1,"doctor-item",3,"click"],[1,"doc-avatar"],[1,"doc-name"],[1,"doc-spec"],[1,"no-results"]],template:function(t,a){t&1&&(e(0,"ion-header",0)(1,"ion-toolbar",1)(2,"div",2)(3,"h1",3),i(4,"MedConecta"),n(),d(5,"img",4),n()()(),e(6,"ion-content")(7,"h3",5),i(8,"Pr\xF3xima Consulta"),n(),v(9,ne,17,7,"ion-card",6)(10,oe,7,0,"ion-card",7),e(11,"h3",5),i(12,"A\xE7\xF5es R\xE1pidas"),n(),e(13,"div",8)(14,"div",9),p("click",function(){return a.goToAppointments("schedule")}),e(15,"div",10),d(16,"ion-icon",11),n(),e(17,"p"),i(18,"Agendar"),n()(),e(19,"div",9),p("click",function(){return a.goToAppointments("list")}),e(20,"div",12),d(21,"ion-icon",13),n(),e(22,"p"),i(23,"Hist\xF3rico"),n()(),e(24,"div",9),p("click",function(){return a.viewResults()}),e(25,"div",14),d(26,"ion-icon",15),n(),e(27,"p"),i(28,"Exames"),n()(),e(29,"div",9),p("click",function(){return a.contactSupport()}),e(30,"div",16),d(31,"ion-icon",17),n(),e(32,"p"),i(33,"Suporte"),n()()(),e(34,"h3",5),i(35,"M\xE9dicos Recomendados"),n(),e(36,"div",18)(37,"ion-searchbar",19),p("ionInput",function(S){return a.handleSearch(S)}),n()(),e(38,"div",20)(39,"div",21),v(40,ie,7,5,"div",22)(41,re,3,0,"div",23),n()()()),t&2&&(c(9),u("ngIf",a.nextAppointment),c(),u("ngIf",!a.nextAppointment),c(30),u("ngForOf",a.filteredDoctors),c(),u("ngIf",a.filteredDoctors.length===0))},dependencies:[H,T,z,N,R,q,L,$,V,j,B],styles:['[_nghost-%COMP%]{--ion-font-family: "Inter", sans-serif}ion-content[_ngcontent-%COMP%]{--background: #f8fafc}ion-toolbar.home-header-toolbar[_ngcontent-%COMP%]{--background: #ffffff;--padding-start: 20px;--padding-end: 20px;padding-top:10px;padding-bottom:10px}ion-toolbar.home-header-toolbar[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}ion-toolbar.home-header-toolbar[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:24px;font-weight:800;color:#1e293b;margin:0;letter-spacing:-.5px}ion-toolbar.home-header-toolbar[_ngcontent-%COMP%]   .app-icon[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:contain}.section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b;margin:24px 20px 16px}.appointment-card[_ngcontent-%COMP%]{background:var(--ion-color-primary);border-radius:20px;margin:0 20px 24px;box-shadow:0 10px 25px rgba(var(--ion-color-primary-rgb),.3);color:#fff}.appointment-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:20px}.appointment-card[_ngcontent-%COMP%]   .doctor-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.appointment-card[_ngcontent-%COMP%]   .doctor-row[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:#fff3;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;color:var(--ion-color-primary);border:3px solid #ffffff;margin-right:12px}.appointment-card[_ngcontent-%COMP%]   .doctor-row[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.appointment-card[_ngcontent-%COMP%]   .doctor-row[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.appointment-card[_ngcontent-%COMP%]   .doctor-row[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .spec[_ngcontent-%COMP%]{font-size:13px;opacity:.9}.appointment-card[_ngcontent-%COMP%]   .time-badge[_ngcontent-%COMP%]{background:#ffffff26;padding:8px 12px;border-radius:10px;display:flex;align-items:center;gap:8px;margin-bottom:16px;font-size:14px;font-weight:500}.appointment-card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{--color: var(--ion-color-primary);font-weight:600;height:44px;margin:0}.empty-card[_ngcontent-%COMP%]{margin:0 20px 24px;border-radius:20px;background:#fff;box-shadow:none;border:1px dashed #cbd5e1}.empty-card[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:30px;text-align:center}.empty-card[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;color:#cbd5e1;margin-bottom:10px}.empty-card[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:14px;margin-bottom:16px}.actions-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 24px;margin-bottom:30px;gap:10px}.action-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:70px;cursor:pointer}.action-item[_ngcontent-%COMP%]   .circle-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:#fff;border-radius:18px;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 20px #0000000a;border:1px solid #f1f5f9;margin-bottom:8px;font-size:26px;transition:transform .2s ease}.action-item[_ngcontent-%COMP%]   .circle-icon.color-blue[_ngcontent-%COMP%]{color:#3b82f6;background:#eff6ff;border-color:#dbeafe}.action-item[_ngcontent-%COMP%]   .circle-icon.color-purple[_ngcontent-%COMP%]{color:#8b5cf6;background:#f5f3ff;border-color:#ede9fe}.action-item[_ngcontent-%COMP%]   .circle-icon.color-green[_ngcontent-%COMP%]{color:#10b981;background:#ecfdf5;border-color:#d1fae5}.action-item[_ngcontent-%COMP%]   .circle-icon.color-orange[_ngcontent-%COMP%]{color:#f97316;background:#fff7ed;border-color:#ffedd5}.action-item[_ngcontent-%COMP%]:active   .circle-icon[_ngcontent-%COMP%]{transform:scale(.92)}.action-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#475569;margin:0;text-align:center}.search-wrapper[_ngcontent-%COMP%]{padding:0 20px;margin-bottom:20px}ion-searchbar[_ngcontent-%COMP%]{--background: #ffffff;--box-shadow: 0 4px 12px rgba(0,0,0,.04);--border-radius: 12px;--placeholder-color: #94a3b8;--icon-color: #3880ff !important;color:#3880ff;padding:0;height:52px}ion-searchbar[_ngcontent-%COMP%]   .searchbar-search-icon[_ngcontent-%COMP%]{color:#3880ff!important}.doctors-carousel[_ngcontent-%COMP%]{margin-bottom:30px}.doctors-carousel[_ngcontent-%COMP%]   .carousel-track[_ngcontent-%COMP%]{display:flex;overflow-x:auto;padding:4px 20px 20px;gap:16px;-webkit-overflow-scrolling:touch}.doctors-carousel[_ngcontent-%COMP%]   .carousel-track[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.doctors-carousel[_ngcontent-%COMP%]   .doctor-item[_ngcontent-%COMP%]{flex:0 0 110px;background:#fff;padding:16px 10px;border-radius:16px;text-align:center;box-shadow:0 4px 12px #0000000d;border:1px solid #f1f5f9;display:flex;flex-direction:column;align-items:center}.doctors-carousel[_ngcontent-%COMP%]   .doctor-item[_ngcontent-%COMP%]   .doc-avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;color:#334155;margin-bottom:10px;box-shadow:0 4px 10px #00000014;border:2px solid #ffffff}.doctors-carousel[_ngcontent-%COMP%]   .doctor-item[_ngcontent-%COMP%]   .doc-name[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#1e293b;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:2px}.doctors-carousel[_ngcontent-%COMP%]   .doctor-item[_ngcontent-%COMP%]   .doc-spec[_ngcontent-%COMP%]{font-size:11px;color:#64748b;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.doctors-carousel[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]{width:100%;text-align:center;color:#94a3b8;font-size:14px;padding:10px}']});let l=s;return l})();export{xe as HomePage};
