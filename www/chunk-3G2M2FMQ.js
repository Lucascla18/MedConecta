import{A as U,B as K,C as H,a as D,z as G}from"./chunk-EYFEUQ7G.js";import{D as F,G as j,K as B,L as V}from"./chunk-RMY4OVEQ.js";import{$ as P,A as b,B as o,C as i,D as c,F as h,Ia as R,Ja as N,K as l,Ka as W,Ma as q,Na as A,O as u,P as f,Q as x,R as _,W as M,da as w,ea as O,fa as y,ga as v,ha as E,ia as S,la as k,m as g,ma as L,ta as T,w as m,wa as z,y as C,ya as I}from"./chunk-HUONWBXV.js";import"./chunk-WFQEB5QE.js";import"./chunk-7KGURMOZ.js";import"./chunk-KMRFCD75.js";import"./chunk-62GOUXOV.js";import"./chunk-QQOM2FGK.js";import"./chunk-KMHLOZFG.js";import"./chunk-NFKFN677.js";import"./chunk-4WFVMWDK.js";import"./chunk-MDMZPGPE.js";import"./chunk-L533IC4V.js";import"./chunk-NY44LQGJ.js";import"./chunk-IFR4H3YE.js";import"./chunk-LF5XB4YN.js";import{e as d}from"./chunk-BDMMXEV4.js";var J=()=>["/register"],re=(()=>{let s=class s{constructor(){this.email="",this.senha="",this.navCtrl=g(L),this.auth=g(F),this.loadingCtrl=g(N),this.toastCtrl=g(W),this.alertCtrl=g(R),D({medkitOutline:H,logoGoogle:K,logoFacebook:U,logoApple:G})}ngOnInit(){j(this.auth).subscribe(e=>{e&&(console.log("Usu\xE1rio detectado, redirecionando..."),this.navCtrl.navigateRoot("/tabs/home"))})}handleLogin(){return d(this,null,function*(){let e=this.email.trim(),t=this.senha.trim();if(!e||!t){this.showErrorToast("Por favor, preencha e-mail e senha.");return}let n=yield this.loadingCtrl.create({message:"Entrando...",spinner:"crescent"});yield n.present();try{yield V(this.auth,e,t),console.log("Login OK"),this.email="",this.senha="",this.navCtrl.navigateRoot("/tabs/home")}catch(a){this.handleAuthError(a)}finally{yield n.dismiss()}})}recoverPassword(){return d(this,null,function*(){yield(yield this.alertCtrl.create({header:"Redefinir Senha",message:"Informe seu e-mail para receber o link de redefini\xE7\xE3o.",inputs:[{name:"email",type:"email",placeholder:"seuemail@exemplo.com",value:this.email}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Enviar",handler:t=>t.email?(this.sendResetLink(t.email),!0):(this.showErrorToast("Por favor, digite um e-mail."),!1)}]})).present()})}sendResetLink(e){return d(this,null,function*(){let t=yield this.loadingCtrl.create({message:"Enviando...",spinner:"crescent"});yield t.present();try{yield B(this.auth,e),(yield this.toastCtrl.create({message:"E-mail enviado! Verifique sua caixa de entrada.",duration:4e3,color:"success",position:"top"})).present()}catch(n){console.error("Erro na recupera\xE7\xE3o:",n);let a="Erro ao enviar e-mail.";n.code==="auth/user-not-found"?a="E-mail n\xE3o cadastrado.":n.code==="auth/invalid-email"&&(a="E-mail inv\xE1lido."),this.showErrorToast(a)}finally{yield t.dismiss()}})}handleAuthError(e){console.error("Erro no login:",e.code);let t="Ocorreu um erro. Tente novamente.";e.code==="auth/invalid-email"||e.code==="auth/wrong-password"||e.code==="auth/user-not-found"||e.code==="auth/invalid-credential"?t="E-mail ou senha inv\xE1lidos.":e.code==="auth/too-many-requests"&&(t="Muitas tentativas. Tente novamente mais tarde."),this.showErrorToast(t)}showErrorToast(e){return d(this,null,function*(){(yield this.toastCtrl.create({message:e,duration:3e3,color:"danger",position:"top"})).present()})}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=C({type:s,selectors:[["app-login"]],decls:30,vars:4,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-header"],["src","assets/logo.jpg","alt","Logo MedConecta"],["id","login-form",3,"ngSubmit"],["lines","none"],["label","E-mail","label-placement","floating","type","email","placeholder","seuemail@exemplo.com","name","email","required","",3,"ngModelChange","ngModel"],["label","Senha","label-placement","floating","type","password","placeholder","Sua senha","name","senha","required","",3,"ngModelChange","ngModel"],[1,"forgot-password-link",3,"click"],["expand","block","shape","round","type","submit"],[1,"divider"],[1,"social-login-buttons"],["fill","clear","shape","round"],["slot","icon-only","name","logo-google"],["slot","icon-only","name","logo-facebook"],["slot","icon-only","name","logo-apple"],[1,"toggle-form"],[3,"routerLink"]],template:function(t,n){t&1&&(o(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2),c(4,"img",3),o(5,"h1"),l(6,"MedConecta"),i()(),o(7,"form",4),h("ngSubmit",function(){return n.handleLogin()}),o(8,"ion-item",5)(9,"ion-input",6),x("ngModelChange",function(r){return f(n.email,r)||(n.email=r),r}),i()(),o(10,"ion-item",5)(11,"ion-input",7),x("ngModelChange",function(r){return f(n.senha,r)||(n.senha=r),r}),i()(),o(12,"a",8),h("click",function(){return n.recoverPassword()}),l(13,"Esqueceu a senha?"),i(),o(14,"ion-button",9),l(15,"Entrar"),i()(),o(16,"div",10),l(17,"ou continue com"),i(),o(18,"div",11)(19,"ion-button",12),c(20,"ion-icon",13),i(),o(21,"ion-button",12),c(22,"ion-icon",14),i(),o(23,"ion-button",12),c(24,"ion-icon",15),i()(),o(25,"div",16)(26,"span"),l(27,"N\xE3o tem uma conta?"),i(),o(28,"a",17),l(29,"Registre-se"),i()()()()()),t&2&&(m(9),u("ngModel",n.email),m(2),u("ngModel",n.senha),m(17),b("routerLink",_(3,J)))},dependencies:[M,k,E,w,O,S,v,y,P,z,I,A,T,q],styles:['@charset "UTF-8";[_nghost-%COMP%]{--ion-font-family: "Inter", sans-serif;display:block;height:100%}ion-content[_ngcontent-%COMP%]{--background: #ffffff;--ion-background-color: #ffffff;--overflow: auto;--height: 100%}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100%;padding:0 20px;box-sizing:border-box}.login-card[_ngcontent-%COMP%]{width:100%;max-width:420px;background:transparent;box-shadow:none;border:none;margin:auto 0;padding:40px 0;display:flex;flex-direction:column;gap:20px;transition:gap .3s ease}.logo-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.logo-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:contain;transition:all .3s ease}.logo-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-top:10px;color:#1e293b;transition:font-size .3s ease}ion-item[_ngcontent-%COMP%]{--background: #f8fafc;--border-radius: 12px;--padding-start: 16px;--inner-border-width: 0;color:#0f172a;margin-bottom:16px;border:1px solid #e2e8f0;height:56px;--min-height: 56px;transition:all .3s ease}ion-button[shape=round][_ngcontent-%COMP%]{--border-radius: 12px;height:50px;font-weight:600;font-size:16px;margin-top:8px;--box-shadow: 0 4px 12px rgba(var(--ion-color-primary-rgb), .25);transition:height .3s ease}.social-login-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:16px;margin-bottom:10px}.social-login-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:0 0 70px;height:50px;--background: #f8fafc;--border-color: #e2e8f0;--border-width: 1px;--border-style: solid;--box-shadow: none;margin-top:0;font-size:22px;--color: #334155;--border-radius: 10px}.forgot-password-link[_ngcontent-%COMP%]{text-align:right;font-size:14px;color:var(--ion-color-primary);font-weight:600;text-decoration:none;margin-top:-8px;margin-bottom:8px}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;color:#94a3b8;font-size:13px;margin:20px 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #e2e8f0}.divider[_ngcontent-%COMP%]:not(:empty):before{margin-right:1em}.divider[_ngcontent-%COMP%]:not(:empty):after{margin-left:1em}.toggle-form[_ngcontent-%COMP%]{text-align:center;margin-top:16px;font-size:14px;color:#64748b}.toggle-form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700;text-decoration:none;margin-left:4px}@media (max-height: 740px){.login-container[_ngcontent-%COMP%]{padding:16px}.login-card[_ngcontent-%COMP%]{gap:12px;padding-top:20px;padding-bottom:20px}.logo-header[_ngcontent-%COMP%]{margin-bottom:0}.logo-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px}.logo-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin-top:4px;display:block!important}ion-item[_ngcontent-%COMP%]{height:48px;--min-height: 48px;margin-bottom:10px;font-size:14px}ion-button[shape=round][_ngcontent-%COMP%]{height:45px;font-size:15px;margin-top:4px}.social-login-buttons[_ngcontent-%COMP%]{gap:10px}.social-login-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:0 0 60px;height:45px}.divider[_ngcontent-%COMP%]{margin:12px 0;font-size:12px}.toggle-form[_ngcontent-%COMP%]{margin-top:10px;padding-bottom:10px}}@media (max-height: 600px){.logo-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}.logo-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}.login-card[_ngcontent-%COMP%]{gap:8px;padding-top:10px;padding-bottom:10px}}']});let p=s;return p})();export{re as LoginPage};
